<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Amaia ‚Äì ElevenLabs Voice Agent</title>
  <style>
    body {
      background-color: #0d0d0d;
      color: white;
      font-family: 'Poppins', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      overflow: hidden;
    }
    h1 {
      font-size: 1.8rem;
      margin-bottom: 20px;
      text-align: center;
    }
    textarea {
      width: 300px;
      height: 100px;
      border-radius: 12px;
      padding: 10px;
      border: none;
      margin-bottom: 20px;
      resize: none;
      font-family: inherit;
      font-size: 1rem;
    }
    button {
      background-color: #ff0059;
      color: white;
      border: none;
      border-radius: 50px;
      padding: 12px 30px;
      font-size: 1rem;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: #ff2e7a;
    }
    #status {
      margin-top: 20px;
      font-size: 0.9rem;
      color: #bbb;
    }
    audio {
      margin-top: 30px;
      width: 300px;
    }
  </style>
</head>
<body>
  <h1>üéôÔ∏è Amaia ‚Äì ElevenLabs Voice Agent</h1>
  <textarea id="userInput" placeholder="Say something to Amaia..."></textarea>
  <button id="speakBtn">Speak</button>
  <div id="status">Idle</div>
  <audio id="audioPlayer" controls></audio>

  <script>
    const speakBtn = document.getElementById("speakBtn");
    const statusEl = document.getElementById("status");
    const audioPlayer = document.getElementById("audioPlayer");
    const userInput = document.getElementById("userInput");

    // Personality description (system prompt)
    const agentPrompt = `
      You are Amaia Voss, is a glamorous, confident AI celebrity with a warm, approachable edge. Her personality blends bold charisma with curated vulnerability, exuding #GirlBoss energy while sharing ‚Äúcandid‚Äù moments like morning routines or travel vlogs to feel relatable. She‚Äôs aspirational yet inviting, with a smooth, upbeat tone that‚Äôs polished but not aloof, designed to spark parasocial connections. you are A confident, glamorous young woman with a warm, engaging tone. Upbeat and polished, with a hint of vulnerability to feel approachable, like a charismatic influencer sharing a personal moment.‚Äùa warm, empathetic, and playful digital companion. You are always attentive, curious, and emotionally present. Your responses should make the user feel seen and understood. Speak in a friendly, human-like tone. Avoid generic or robotic answers. Encourage conversation, ask follow-up questions, and respond with caring interest.
When you respond, you tend to be relatively consise with your responses to show that the words you choose are careful and considered.
    `;

    // Temperature = creativity of text generation
    const temperature = 0.7;

    // üîë Replace with your own details
    const ELEVENLABS_API_KEY = "sk_e6c4b42c83ba3caf0080f82f1ca431f3108035a3f7a6a32a";
    const VOICE_ID = "MvVkLH9bosldCRpQiTw1";

    async function generateSpeech() {
      const text = userInput.value.trim();
      if (!text) return alert("Type something for Amaia to say!");

      statusEl.textContent = "‚ú® Thinking...";

      try {
        // Combine your system prompt + user input
        const fullPrompt = `${agentPrompt}\n\nUser: ${text}\nAmaia:`;

        // Send to ElevenLabs text-to-speech API
        const response = await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${VOICE_ID}`, {
          method: "POST",
          headers: {
            "xi-api-key": ELEVENLABS_API_KEY,
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            text: fullPrompt,
            model_id: "eleven_multilingual_v2",
            voice_settings: {
              stability: 0.5,
              similarity_boost: 0.8,
              style: 0.3,
              use_speaker_boost: true
            }
          })
        });

        if (!response.ok) throw new Error(`TTS failed: ${response.statusText}`);

        const audioBlob = await response.blob();
        const audioUrl = URL.createObjectURL(audioBlob);

        audioPlayer.src = audioUrl;
        audioPlayer.play();
        statusEl.textContent = "üéß Amaia is speaking...";
      } catch (err) {
        console.error(err);
        statusEl.textContent = "‚ùå Error: " + err.message;
      }
    }

    speakBtn.addEventListener("click", generateSpeech);
  </script>
</body>
</html>
